/*
tumblrFeed v 1.0.0 2012-08-03
http://www.websketcher.co.uk

Copyright (c) 2012,
*/
(function (a) { a.fn.tumblrFeed = function (b) { var c = a.extend({}, a.fn.tumblrFeed.defaultOptions, b); return this.each(function () { function e(b) { var c = []; c.push("<ul class='tumblr_post_chat'>"); a.each(b.dialogue, function (a, b) { c.push("<li><i>" + b.name + "</i></li>") }); c.push("</ul>"); return c.join("") } function d(b) { var c = []; c.push("<div class='tumblr_post_images'>"); a.each(b.photos, function (a, b) { c.push("<img src=" + b.alt_sizes[1].url + ">") }); c.push("</div>"); return c.join("") } var b = a(this); myJsonpCallback = function (c) {a.each(c.response.posts, function (c, f) { var g = f.date.toString().substr(0, 10); if (f.type == "text") { a(b).append("<div class='post post_text'><h2>" + f.title + "</h2><p>" + f.body + "</p><br/><span'>" + g + "</span></div><br/>") } if (f.type == "photo") { a(b).append("<div class='post post_photo'><p>" + f.caption + "</p>" + d(f) + "<br/><span>" + g + "</span></div><br/>") } if (f.type == "video") { a(b).append("<div class='post post_video'><h2>" + f.caption + "</h2><br/>" + f.player[2].embed_code + "<br/><span>" + g + "</span></div><br/>") } if (f.type == "audio") { a(b).append("<div class='post post_audio'><br/><p>" + f.caption + "</p>" + f.artist + "<p>" + f.album + "</p><p>" + f.player + "</p><br/><span>" + g + "</span></div><br/>") } if (f.type == "link") { a(b).append("<div class='post post_link'><p><a target='_blank' href=" + f.url + "><h2>" + f.title + "</h2></a></p><p>" + f.description + "</p><br/><span>" + g + "</span></div><br/>") } if (f.type == "chat") { a(b).append("<div class='post post_chat'><ul><li><h2>" + f.title + "</h2></li><li>" + e(f) + "</li><li><span>" + g + "</span></li></ul></div><br/>") } if (f.type == "quote") { a(b).append("<div class='post post_quote'><br/><h2>Quote:</h2><br/><p>" + f.text + "</p><br/><p>--" + f.source + "</p><br/><p><span>" + g + "</span></p></div><br/>") } }) }; a.ajax({ type: "GET", url: "http://api.tumblr.com/v2/blog/" + c.tumblrUsername + ".tumblr.com/posts", dataType: "jsonp", data: { api_key: c.apikey, jsonp: "myJsonpCallback", limit: c.postLimit, type: c.postType} }) }); a.fn.tumblrFeed.defaultOptions = { tumblrUsername: "", apikey: "", postLimit: 20} } })(jQuery)